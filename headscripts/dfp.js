window.googletag=window.googletag||{cmd:[]};var REFRESH_KEY="refresh",REFRESH_VALUE="true",SECONDS_TO_WAIT_AFTER_VIEWABILITY=Math.floor(6*Math.random())+30;function getDeviceType(){try{var e=navigator.userAgent;if(/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e))return"tablet";if(/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e))return"mobile";return"desktop"}catch(t){console.log("getDeviceType:"+t)}}function setupGoogleTag(){googletag.pubads().addEventListener("impressionViewable",function(e){var t=e.slot;t.getTargeting(REFRESH_KEY).indexOf(REFRESH_VALUE)>-1&&setTimeout(function(){googletag.pubads().refresh([t])},1e3*SECONDS_TO_WAIT_AFTER_VIEWABILITY)}),googletag.pubads().enableSingleRequest(),googletag.enableServices()}function constructAds(){try{var e=document.querySelectorAll("div[data-adslot]");e.length>0&&e.forEach(function(e){var t=e.getAttribute("data-adslot"),a=e.getAttribute("data-adsize-desktop");"desktop"==getDeviceType()&&(a=JSON.parse(e.getAttribute("data-size-desktop"))),("mobile"==getDeviceType()||"tablet"==getDeviceType())&&(a=JSON.parse(e.getAttribute("data-size-mobile")));var i=e.getAttribute("data-ad-refresh");let d=(Math.random()+1).toString(36).substring(7);e.setAttribute("id",d),"undefined"!=typeof googletag&&googletag.cmd.push(function(){var e=googletag.defineSlot(t,a,d);"true"===i&&e.setTargeting(REFRESH_KEY,REFRESH_VALUE),e.addService(googletag.pubads())})})}catch(t){console.log("constructAd:"+t)}}async function displayAds(){try{await constructAds();var e=document.querySelectorAll("div[data-adslot]");e.length>0&&e.forEach(function(e){e.getAttribute("data-adslot");var t=e.getAttribute("id");"undefined"!=typeof googletag&&(googletag.cmd.push(function(){googletag.display(t)}),e.removeAttribute("data-adslot"))})}catch(t){console.log("displayAds:"+t)}}googletag.cmd.push(function(){setupGoogleTag()}),window.addEventListener("DOMContentLoaded",function(){displayAds()});